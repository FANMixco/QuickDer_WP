<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name = "format-detection" content = "telephone=no"/>
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width;" />
	    <link rel="stylesheet" href="../js/jquery_mobile/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="../cordova-2.0.0.js"></script>
	    <script type="text/javascript" src="../js/jquery-1.7.1.min.js"></script>
	    <script type="text/javascript" src="../js/jquery_mobile/jquery.mobile-1.1.1.min.js"></script>
        <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true&language=es"></script>
        <title>Ubicación</title>
        <script type="text/javascript">
            function mapInit() {

                // Set the options to be used when creating the map
                var myOptions = {
                    zoom: 0,
                    center: new google.maps.LatLng(0, 0),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                // Create the new
                map = new google.maps.Map(document.getElementById("myMap"), myOptions);

                // Check if the browser supports geolocation
                if (navigator.geolocation) {

                    navigator.geolocation.getCurrentPosition(currentPositionCallback);

                } else {

                    alert('The browser does not support geolocation');

                }

            }

            function currentPositionCallback(position) {

                // Create a new latlng based on the latitude and longitude from the user's position
                var user_lat_long = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

                // Add a marker using the user_lat_long position
                var marker = new google.maps.Marker({
                    position: user_lat_long,
                    map: map
                });

                // Set the center of the map to the user's position and zomm into a more detailed level
                map.setCenter(user_lat_long);
                map.setZoom(17);

            }

            google.setOnLoadCallback(mapInit()); 
        </script>
    </head>
    <body onload="mapInit();">

        <div data-role="page" id="dialogo2">
	        <div data-role="header">
		        <h1>Ubicación</h1>
	        </div>

	        <div data-role="content">
                <div id='myMap' style="width:400px; height:400px; margin:auto;"></div>
            </div>
        </div>
    </body>
</html>
